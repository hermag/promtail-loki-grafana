{"version":3,"sources":["../src/organisations_ctrl.js"],"names":["PanelCtrl","OrganisationsCtrl","$scope","$injector","$location","backendSrv","organisationList","baseURL","window","location","href","indexOf","split","loadOrganisations","get","then","result","map","item","id","orgId","name","templateUrl"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAESA,qB,kBAAAA,S;;;;;;;;;;;;;;;;;;;;;8DAEHC,iB;;;AACF;;;;;;;AAOA,2CAAYC,MAAZ,EAAoBC,SAApB,EAA+BC,SAA/B,EAA0CC,UAA1C,EAAsD;AAAA;;AAAA,sJAC5CH,MAD4C,EACpCC,SADoC;;AAElD;AACA,0BAAKE,UAAL,GAAkBA,UAAlB;AACA,0BAAKC,gBAAL,GAAwB,EAAxB;AACA;AACA,wBAAIC,UAAU,EAAd;AACA,wBAAIC,OAAOC,QAAP,CAAgBC,IAAhB,CAAqBC,OAArB,CAA6B,KAA7B,IAAsC,CAAC,CAA3C,EAA8C;AAC1CJ,kCAAUC,OAAOC,QAAP,CAAgBC,IAAhB,CAAqBE,KAArB,CAA2B,KAA3B,EAAkC,CAAlC,CAAV;AACH,qBAFD,MAGK;AACDL,kCAAUC,OAAOC,QAAP,CAAgBC,IAA1B;AACA,4BAAIH,QAAQI,OAAR,CAAgB,GAAhB,IAAuB,CAAC,CAA5B,EAA+B;AAC3BJ,sCAAUA,QAAQK,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAAV;AACH;AACJ;AACD,0BAAKL,OAAL,GAAeA,OAAf;AACA;AACA,0BAAKM,iBAAL;AAlBkD;AAmBrD;AACD;;;;;;;wDAGoB;AAAA;;AAChB;AACA,6BAAKR,UAAL,CAAgBS,GAAhB,CAAoB,eAApB,EAAqCC,IAArC,CAA0C,UAACC,MAAD,EAAY;AAClD,mCAAKV,gBAAL,GAAwBU,OAAOC,GAAP,CAAW,UAACC,IAAD,EAAU;AACzC,uCAAO;AACHC,wCAAID,KAAKE,KADN;AAEHC,0CAAMH,KAAKG;AAFR,iCAAP;AAIH,6BALuB,CAAxB;AAMH,yBAPD;AAQH;;;;cAzC2BrB,S;;AA2ChCC,8BAAkBqB,WAAlB,GAAgC,aAAhC;;yCACSrB,iB;;iCAAmBA,iB","file":"organisations_ctrl.js","sourcesContent":["/// <reference path=\"../typings/common.d.ts\" />\n/// <reference path=\"../typings/index.d.ts\" />\nimport { PanelCtrl } from \"app/plugins/sdk\";\nimport \"./style.css!\";\nclass OrganisationsCtrl extends PanelCtrl {\n    /**\n     * DashboardList class constructor\n     * @param {IOrganisationsScope} $scope Angular scope\n     * @param {ng.auto.IInjectorService} $injector Angluar injector service\n     * @param {ng.ILocationService} $location Angular location service\n     * @param {any} backendSrv Grafana backend callback\n     */\n    constructor($scope, $injector, $location, backendSrv) {\n        super($scope, $injector);\n        // Init variables\n        this.backendSrv = backendSrv;\n        this.organisationList = [];\n        // Store the URL part before dashboard definition as baseURL\n        let baseURL = '';\n        if (window.location.href.indexOf(\"/d/\") > -1) {\n            baseURL = window.location.href.split(\"/d/\")[0];\n        }\n        else {\n            baseURL = window.location.href;\n            if (baseURL.indexOf(\"?\") > -1) {\n                baseURL = baseURL.split(\"?\")[0];\n            }\n        }\n        this.baseURL = baseURL;\n        // Load organizations for current user\n        this.loadOrganisations();\n    }\n    /**\n     * Load dashboard items\n     */\n    loadOrganisations() {\n        // Fetch list of organisations of current user from Grafana\n        this.backendSrv.get(\"api/user/orgs\").then((result) => {\n            this.organisationList = result.map((item) => {\n                return {\n                    id: item.orgId,\n                    name: item.name\n                };\n            });\n        });\n    }\n}\nOrganisationsCtrl.templateUrl = \"module.html\";\nexport { OrganisationsCtrl, OrganisationsCtrl as PanelCtrl };\n//# sourceMappingURL=organisations_ctrl.js.map"]}